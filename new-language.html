<!DOCTYPE html>
<html lang="uz">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>O'quv Markazi</title>
  <style>
    /* ======== GLOBAL STYLES ======== */
    * {
      margin: 0; 
      padding: 0; 
      box-sizing: border-box;
      font-family: Arial, sans-serif;
    }
    body {
      background-color: #ecf0f1;
      color: #2c3e50;
      transition: background-color 0.3s, color 0.3s;
    }
    a {
      text-decoration: none;
      color: white;
    }
    .dark-mode {
      background-color: #1e1e1e;
      color: #f1f1f1;
    }

    /* ======== REMOVED TOPBAR ========
       (biz avvalgi topbarni butunlay olib tashladik) */

    /* ======== CONTAINER ======== */
    .container {
      display: flex;
      min-height: 100vh;
    }

    /* ======== SIDEBAR ======== */
    .sidebar {
      width: 250px;
      background-color: #2c3e50;
      color: #fff;
      padding: 20px 15px;
      transition: background-color 0.3s;
    }
    .dark-mode .sidebar {
      background-color: #333;
    }
    .sidebar h2 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 18px;
    }
    .sidebar ul {
      list-style: none;
    }
    .sidebar ul li {
      margin-bottom: 15px;
    }
    .sidebar ul li a {
      display: block;
      padding: 10px;
      background-color: #34495e;
      border-radius: 5px;
      transition: 0.3s;
      color: #fff;
    }
    .sidebar ul li a:hover {
      background-color: #1abc9c;
    }
    .dark-mode .sidebar ul li a {
      background-color: #444;
    }
    .dark-mode .sidebar ul li a:hover {
      background-color: #555;
    }

    /* ======== MAIN CONTENT ======== */
    .content {
      flex: 1;
      padding: 25px 30px;
      transition: background-color 0.3s;
    }
    .dark-mode .content {
      background-color: #1e1e1e;
    }

    /* ======== DASHBOARD HEADER (LANG & DARK) ======== */
    .dashboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 10px; /* biroz pastroqqa tushirish */
    }
    .dashboard-header h1 {
      font-size: 26px;
    }
    .lang-container {
      display: flex;
      align-items: center;
    }
    .lang-select {
      font-size: 12px;
      padding: 4px;
      margin-right: 5px;
    }
    .lang-container img {
      width: 20px;
      height: auto;
      margin-left: 5px;
    }
    .dark-toggle-btn {
      background: none;
      border: none;
      cursor: pointer;
      width: 30px;
      height: 30px;
      padding: 2px;
      margin-left: 10px;
    }
    .dark-toggle-btn svg {
      width: 100%;
      height: 100%;
      fill: #2c3e50;
      transition: fill 0.3s;
    }
    .dark-toggle-btn:hover svg {
      fill: #1abc9c;
    }
    .dark-mode .dark-toggle-btn svg {
      fill: #f1f1f1;
    }

    /* ======== INPUT & BUTTON STYLES ======== */
    input[type="text"],
    input[type="date"],
    input[type="number"],
    select {
      width: 100%;
      padding: 12px;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
      color: #2c3e50;
    }
    .dark-mode input,
    .dark-mode select {
      background-color: #444;
      color: #fff;
      border-color: #666;
    }
    label {
      margin-top: 10px;
      display: block;
    }
    button {
      background-color: #3498db;
      color: #fff;
      border: none;
      padding: 10px 15px;
      cursor: pointer;
      border-radius: 5px;
      transition: 0.3s;
      font-size: 14px;
      margin-top: 5px;
    }
    button:hover {
      background-color: #2980b9;
    }

    /* ======== TABLE STYLES ======== */
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
      background-color: #fff;
      border-radius: 5px;
      overflow: hidden;
      color: #2c3e50;
    }
    .dark-mode table {
      background-color: #2c2c2c;
      color: #f1f1f1;
    }
    thead {
      background-color: #34495e;
      color: #fff;
    }
    .dark-mode thead {
      background-color: #444;
    }
    th, td {
      padding: 14px;
      border: 1px solid #ddd;
      text-align: left;
      vertical-align: middle;
    }
    tr:nth-child(even) {
      background-color: #f9f9f9;
    }
    .dark-mode tr:nth-child(even) {
      background-color: #3c3c3c;
    }
    .delete-btn {
      background-color: #c0392b;
      border: none;
      color: #fff;
      padding: 8px 12px;
      border-radius: 5px;
      cursor: pointer;
    }
    .delete-btn:hover {
      background-color: #e74c3c;
    }

    /* ======== SEARCH RESULT ======== */
    .search-result {
      margin-top: 10px;
      font-weight: bold;
      color: #e74c3c;
    }
    .dark-mode .search-result {
      color: #f39c12;
    }

    /* ======== RESPONSIVE ======== */
    @media (max-width: 768px) {
      .container {
        flex-direction: column;
      }
      .sidebar {
        width: 100%;
        height: auto;
      }
      .dashboard-header {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- SIDEBAR -->
    <nav class="sidebar">
      <h2 data-lang="sidebarTitle">Learning Center</h2>
      <ul>
        <li><a href="#" onclick="showSection('dashboard')" data-lang="menuDashboard">Dashboard</a></li>
        <li><a href="#" onclick="showSection('students')" data-lang="menuStudents">Students</a></li>
        <li><a href="#" onclick="showSection('payments')" data-lang="menuPayments">Payments</a></li>
        <li><a href="#" onclick="showSection('attendance')" data-lang="menuAttendance">Attendance</a></li>
      </ul>
    </nav>

    <!-- MAIN CONTENT -->
    <main class="content">
      <!-- Dashboard -->
      <section id="dashboard">
        <!-- Bitta qator: Chapda "Welcome, Admin!", o‘ngda til va dark mode -->
        <div class="dashboard-header">
          <h1 data-lang="dashboardTitle">Welcome, Admin!</h1>
          <div class="lang-container">
            <select class="lang-select" id="langSelect" onchange="changeLanguage()">
              <option value="uz">O'zbek</option>
              <option value="en">English</option>
            </select>
            <!-- <img src="uzbek_flag.png" alt="Uzbek Flag"> -->
            <button class="dark-toggle-btn" onclick="toggleDarkMode()" title="Toggle Dark Mode">
              <!-- Oy (moon) SVG ikonkasi -->
              <svg viewBox="0 0 24 24">
                <path d="M21.752 15.002A9 9 0 0 1 12 3v0a9 9 0 0 0 0 18 9 9 0 0 0 9.752-5.998z"/>
              </svg>
            </button>
          </div>
        </div>
        <p data-lang="dashboardText">Here you can manage your learning center.</p>
      </section>

      <!-- O‘quvchilar bo‘limi -->
      <section id="students" style="display: none;">
        <!-- ... qolgani o‘sha-o‘sha ... -->
        <h1 data-lang="studentsTitle">Add Student</h1>
        <input type="text" id="studentName" placeholder="Name" required>
        <input type="text" id="studentSurname" placeholder="Surname" required>
        <input type="text" id="studentPhone" placeholder="Phone" required>
        <label data-lang="studentsDateLabel">Join date:</label>
        <input type="date" id="studentDate" required>
        <button onclick="addStudent()" data-lang="studentsAddBtn">Add</button>

        <!-- Qidiruv -->
        <h3 data-lang="searchTitle">Search</h3>
        <input type="text" id="studentSearch" placeholder="Name Surname or ID" oninput="searchStudent()">
        <div class="search-result" id="searchResult"></div>

        <h1 data-lang="studentsListTitle">Student List</h1>
        <table>
          <thead>
            <tr>
              <th data-lang="thName">Name</th>
              <th data-lang="thSurname">Surname</th>
              <th data-lang="thPhone">Phone</th>
              <th data-lang="thDate">Date</th>
              <th data-lang="thID">ID</th>
              <th data-lang="thDelete">Delete</th>
            </tr>
          </thead>
          <tbody id="studentList"></tbody>
        </table>
      </section>

      <!-- To‘lovlar (Payments) -->
      <section id="payments" style="display: none;">
        <!-- ... xuddi avvalgidek ... -->
      </section>

      <!-- Davomat (Attendance) -->
      <section id="attendance" style="display: none;">
        <!-- ... xuddi avvalgidek ... -->
      </section>
    </main>
  </div>

  <script>
    /* 
      KODNING QOLGAN QISMI AVVALGIDEK:
      1) TIL REJIMI (languages obj)
      2) changeLanguage(), applyLanguage()
      3) toggleDarkMode()
      4) showSection()
      5) localStorage ma'lumotlari (students, payments, attendance)
      6) addStudent(), renderStudents(), deleteStudent(), searchStudent()
      7) savePayment(), renderPayments(), deletePayment()
      8) saveAttendance(), renderAttendance(), deleteAttendance()
      9) saveData(), loadData()
      10) window.addEventListener('DOMContentLoaded', ...)
    */

    /* Soddalik uchun faqat muhim joylarni ko'rsatamiz.
       Avvalgi misoldagi funksiyalarni shu yerga to'liq ko'chiring. 
       (Ortiqcha o'zgarishsiz.)
    */

    const languages = {
      uz: {
        sidebarTitle: "O'quv Markazi",
        menuDashboard: "Dashboard",
        menuStudents: "O‘quvchilar",
        menuPayments: "To‘lovlar",
        menuAttendance: "Davomat",

        dashboardTitle: "Xush kelibsiz, Admin!",
        dashboardText: "Bu yerda o'quv markazingizni boshqarishingiz mumkin.",

        studentsTitle: "O‘quvchi qo‘shish",
        studentsDateLabel: "Kelgan sana:",
        studentsAddBtn: "Qo‘shish",
        searchTitle: "Qidiruv",
        studentsListTitle: "O‘quvchilar ro‘yxati",

        thName: "Ism",
        thSurname: "Familiya",
        thPhone: "Telefon raqami",
        thDate: "Kelgan sana",
        thID: "ID",
        thDelete: "O‘chirish",

        // ...
      },
      en: {
        sidebarTitle: "Learning Center",
        menuDashboard: "Dashboard",
        menuStudents: "Students",
        menuPayments: "Payments",
        menuAttendance: "Attendance",

        dashboardTitle: "Welcome, Admin!",
        dashboardText: "Here you can manage your learning center.",

        studentsTitle: "Add Student",
        studentsDateLabel: "Join date:",
        studentsAddBtn: "Add",
        searchTitle: "Search",
        studentsListTitle: "Student List",

        thName: "Name",
        thSurname: "Surname",
        thPhone: "Phone",
        thDate: "Date",
        thID: "ID",
        thDelete: "Delete",

        // ...
      }
    };

    function changeLanguage() {
      const lang = document.getElementById("langSelect").value;
      localStorage.setItem("appLang", lang);
      applyLanguage(lang);
    }

    function applyLanguage(lang) {
      const elements = document.querySelectorAll("[data-lang]");
      elements.forEach(el => {
        const key = el.getAttribute("data-lang");
        if (languages[lang][key]) {
          el.textContent = languages[lang][key];
        }
      });
      // Option-lar
      // ...
    }

    function toggleDarkMode() {
      document.body.classList.toggle("dark-mode");
      const mode = document.body.classList.contains("dark-mode") ? "dark" : "light";
      localStorage.setItem("theme", mode);
    }

    function showSection(sectionId) {
      const sections = document.querySelectorAll('section');
      sections.forEach(sec => sec.style.display = 'none');
      document.getElementById(sectionId).style.display = 'block';
    }

    let students = [], currentStudentId = 0;
    let payments = [], currentPaymentId = 0;
    let attendance = [], currentAttendanceId = 0;

    function addStudent() {
      // ...
    }
    function renderStudents() {
      // ...
    }
    function deleteStudent(id) {
      // ...
    }
    function searchStudent() {
      // ...
    }

    function savePayment() {
      // ...
    }
    function renderPayments() {
      // ...
    }
    function deletePayment(payId) {
      // ...
    }

    function saveAttendance() {
      // ...
    }
    function renderAttendance() {
      // ...
    }
    function deleteAttendance(id) {
      // ...
    }

    function saveData() {
      // ...
    }
    function loadData() {
      // ...
    }

    window.addEventListener('DOMContentLoaded', () => {
      const savedLang = localStorage.getItem("appLang") || "uz";
      document.getElementById("langSelect").value = savedLang;
      applyLanguage(savedLang);

      const theme = localStorage.getItem("theme");
      if (theme === "dark") {
        document.body.classList.add("dark-mode");
      }

      loadData();
      renderStudents();
      renderPayments();
      renderAttendance();
    });
  </script>
</body>
</html>
